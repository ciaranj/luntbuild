<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Configuring Rake Builder.</title><link rel="stylesheet" href="luntbuild.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.67.2"><link rel="start" href="index.html" title="Luntbuild - Build Automation and Management User's Guide"><link rel="up" href="ch12.html" title="Chapter 12. Creating the Project Builder(s)"><link rel="prev" href="ch12s04.html" title="Configuring Maven2 Builder."><link rel="next" href="ch13.html" title="Chapter 13. Creating Build Schedule(s) for the Project"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Configuring Rake Builder.</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch12s04.html"><img src="../images/prev.gif" alt="Prev"></a> </td><th width="60%" align="center">Chapter 12. Creating the Project Builder(s)</th><td width="20%" align="right"> <a accesskey="n" href="ch13.html"><img src="../images/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id349253"></a>Configuring Rake Builder.</h2></div></div></div><p>
        <a href="http://rake.rubyforge.org/" target="_top">Rake</a> builder a simple Ruby build program with capabilities similar to make.
    </p><p>
    </p><div class="variablelist"><dl><dt><span class="term">Name</span></dt><dd><p>
        Provide a name to identify this builder, this name can be changed later.
        </p></dd><dt><span class="term">Command to run Rake</span></dt><dd><p>
        Specify the command to run Rake (normally path to rake.bat).
        For example: /path/to/rake.
        String enclosed by ${...} will be interpreted as OGNL expression, and it will be evaluated before execution.
        Root object used for OGNL expression evaluation here is current <a href="../javadoc/com/luntsys/luntbuild/builders/Builder.html" target="_top">Builder</a> object.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>A single argument that includes spaces should be quoted in order not to be interpreted as multiple arguments.</p></td></tr></table></div><p>
        You can modify the command to add Rake command line options and properties.
        </p></dd><dt><span class="term">Build script path</span></dt><dd><p>
        The path of the Rake build script. If this path is not an absolute path, it is assumed, that it is relative
        to the project work directory.
        </p></dd><dt><span class="term">Build targets</span></dt><dd><p>
        Specify the target(s) to build. Use space to separate different targets (target name containing spaces should
        be quoted in order not to be interpreted as multiple targets).
		If not specified, the default target in the above Rake build file will be build.
		You can also use OGNL expressions (${...}) to pass variables
        as the target name. For example you can use ${build.schedule.name} to use different targets for different schedules.
        Root object used for OGNL expression evaluation here is current <a href="../javadoc/com/luntsys/luntbuild/builders/Builder.html" target="_top">Builder</a> object.
        </p></dd><dt><span class="term">Build properties</span></dt><dd><p>
		Define build properties here to pass into the Rake build script. For example:
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td>buildVersion=${build.version}</td></tr><tr><td>scheduleName=${build.schedule.name}</td></tr></table><p>
        </p><p>
		You should set one variable per line. OGNL expression can be used to form the value provided
		it is enclosed by ${...}.
        Root object used for OGNL expression evaluation here is current <a href="../javadoc/com/luntsys/luntbuild/builders/Builder.html" target="_top">Builder</a> object.
        </p></dd><dt><span class="term">Environment variables</span></dt><dd><p>
        Environment variables to set before running this builder. For example:
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td>MYAPP_HOME=${build.schedule.workingDir}</td></tr><tr><td>SCHEDULE_NAME=${build.schedule.name}</td></tr></table><p>
        </p><p>
		You should specify one variable per line. OGNL expression can be inserted to form the value,
		provided they are enclosed by ${...}.
        Root object used for OGNL expression evaluation here is current <a href="../javadoc/com/luntsys/luntbuild/builders/Builder.html" target="_top">Builder</a> object.
        </p></dd><dt><span class="term">Build success condition</span></dt><dd><p>
        The build success condition is an OGNL expression used to determine, if the build of the current project
        was successful (root object used for OGNL expression evaluation here is current <a href="../javadoc/com/luntsys/luntbuild/builders/Builder.html" target="_top">Builder</a> object).
		If left empty, the <span class="emphasis"><em>result==0 and !logContainsLine("Command failed with status")</em></span>
		value is assumed. When this expression evaluates to true, the build is considered successful.
		Here are some examples to demonstrate format of this OGNL expression:
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td>
			<span class="emphasis"><em>result==0</em></span>, here "result" represents return code of Rake execution of the build file.
			</td></tr><tr><td>
			<span class="emphasis"><em>logContainsLine("^ERROR.*")</em></span>, the expression will be true if the build's build log contains
			a line that matches the regular expression pattern "^ERROR.*".
			Please see <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Pattern.html" target="_top">
			http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Pattern.html
			</a> for the format of the regular expressions.
			</td></tr><tr><td>
			The above expressions can be prefixed with a '!' character to inverse the value.
			For example, !logContainsLine("^ERROR.*") will be true if the build log does not contain
			a line that matches the specified pattern.
			</td></tr><tr><td>
			The above expressions can be joined into expression with "and", and "or".
			For example, the expression <span class="emphasis"><em>result==0 and !logContainsLine("^ERROR.*")</em></span>
			will be true if Rake execution of the build returns 0, and the build log does not
			contain any line starting with "ERROR".
			</td></tr></table><p>
        </p></dd></dl></div><p>
</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch12s04.html"><img src="../images/prev.gif" alt="Prev"></a> </td><td width="20%" align="center"><a accesskey="u" href="ch12.html"><img src="../images/up.gif" alt="Up"></a></td><td width="40%" align="right"> <a accesskey="n" href="ch13.html"><img src="../images/next.gif" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">Configuring Maven2 Builder. </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="../images/home.gif" alt="Home"></a></td><td width="40%" align="right" valign="top"> Chapter 13. Creating Build Schedule(s) for the Project</td></tr></table></div></body></html>
