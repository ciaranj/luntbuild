CREATE TABLE LB_ROLE(ID NUMBER(20) NOT NULL PRIMARY KEY,NAME VARCHAR2(255) NOT NULL,CONSTRAINT SYS_CT_1 UNIQUE(NAME));
CREATE TABLE LB_ROLES_MAPPING(ID NUMBER(20) NOT NULL PRIMARY KEY,FK_USER_ID NUMBER(20) NOT NULL,FK_PROJECT_ID NUMBER(20) NOT NULL,FK_ROLE_ID NUMBER(20) NOT NULL);
CREATE TABLE LB_BUILD(ID NUMBER(20) NOT NULL PRIMARY KEY,STATUS INTEGER,VERSION VARCHAR2(255),LABEL_STRATEGY INTEGER,POSTBUILD_STRATEGY INTEGER,HAVE_LABEL_ON_HEAD INTEGER,BUILD_TYPE INTEGER,START_DATE TIMESTAMP,END_DATE TIMESTAMP,REBUILD INTEGER,VCS_LIST BLOB,BUILDER_LIST BLOB,POSTBUILDER_LIST BLOB,FK_SCHEDULE_ID NUMBER(20) NOT NULL);
CREATE TABLE LB_USER(ID NUMBER(20) NOT NULL PRIMARY KEY,NAME VARCHAR2(255) NOT NULL,PASSWORD VARCHAR2(255),CAN_CREATE_PROJECT INTEGER,CONTACTS BLOB,FULLNAME VARCHAR2(255),CONSTRAINT SYS_CT_3 UNIQUE(NAME));
CREATE TABLE LB_PROJECT(ID NUMBER(20) NOT NULL PRIMARY KEY,NAME VARCHAR2(255) NOT NULL,DESCRIPTION VARCHAR2(255),NOTIFIERS BLOB,VCS_LIST BLOB,BUILDER_LIST BLOB,VARIABLES VARCHAR2(2000),LOG_LEVEL INTEGER,CONSTRAINT SYS_CT_5 UNIQUE(NAME));
CREATE TABLE LB_VCS_LOGIN(ID NUMBER(20) NOT NULL PRIMARY KEY,FK_PROJECT_ID NUMBER(20) NOT NULL,LOGIN VARCHAR2(255),FK_USER_ID NUMBER(20) NOT NULL,CONSTRAINT SYS_CT_7 UNIQUE(FK_PROJECT_ID,LOGIN));
CREATE TABLE LB_SCHEDULE(ID NUMBER(20) NOT NULL PRIMARY KEY,FK_PROJECT_ID NUMBER(20) NOT NULL,SCHED_DISABLED INTEGER, NAME VARCHAR2(255) NOT NULL,DESCRIPTION VARCHAR2(255),NEXT_VERSION VARCHAR2(2000),QUARTZ_TRIGGER BLOB,DEPENDENT_SCHEDULE_IDS BLOB,BUILD_NECESSARY_CONDITION VARCHAR2(255),ASSOCIATED_BUILDER_NAMES BLOB,ASSOCIATED_POSTBUILDER_NAMES BLOB,BUILD_TYPE INTEGER,LABEL_STRATEGY INTEGER,NOTIFY_STRATEGY INTEGER,POSTBUILD_STRATEGY INTEGER,TRIGGER_DEPENDENCY_STRATEGY INTEGER,STATUS INTEGER,STATUS_DATE TIMESTAMP,BUILD_CLEANUP_STRATEGY INTEGER,BUILD_CLEANUP_STRATEGY_DATA VARCHAR2(255),WORKING_PATH VARCHAR2(255),CONSTRAINT SYS_CT_9 UNIQUE(FK_PROJECT_ID,NAME));
CREATE TABLE LB_NOTIFY_MAPPING(ID NUMBER(20) NOT NULL PRIMARY KEY,FK_PROJECT_ID NUMBER(20) NOT NULL,FK_USER_ID NUMBER(20) NOT NULL);
CREATE TABLE LB_PROPERTY(NAME VARCHAR2(255) NOT NULL PRIMARY KEY,VALUE VARCHAR2(255));
ALTER TABLE LB_ROLES_MAPPING ADD CONSTRAINT FKC01F0A03458EB40A FOREIGN KEY(FK_ROLE_ID) REFERENCES LB_ROLE(ID) ON DELETE CASCADE;
ALTER TABLE LB_VCS_LOGIN ADD CONSTRAINT FK1EF5C187EAB80C95 FOREIGN KEY(FK_USER_ID) REFERENCES LB_USER(ID) ON DELETE CASCADE;
ALTER TABLE LB_VCS_LOGIN ADD CONSTRAINT FK1EF5C187613C97DB FOREIGN KEY(FK_PROJECT_ID) REFERENCES LB_PROJECT(ID) ON DELETE CASCADE;
ALTER TABLE LB_SCHEDULE ADD CONSTRAINT FK3945EF40613C97DB FOREIGN KEY(FK_PROJECT_ID) REFERENCES LB_PROJECT(ID) ON DELETE CASCADE;
ALTER TABLE LB_NOTIFY_MAPPING ADD CONSTRAINT FK1B2007A1EAB80C95 FOREIGN KEY(FK_USER_ID) REFERENCES LB_USER(ID) ON DELETE CASCADE;
ALTER TABLE LB_NOTIFY_MAPPING ADD CONSTRAINT FK1B2007A1613C97DB FOREIGN KEY(FK_PROJECT_ID) REFERENCES LB_PROJECT(ID) ON DELETE CASCADE;
ALTER TABLE LB_ROLES_MAPPING ADD CONSTRAINT FKC01F0A03EAB80C95 FOREIGN KEY(FK_USER_ID) REFERENCES LB_USER(ID) ON DELETE CASCADE;
ALTER TABLE LB_ROLES_MAPPING ADD CONSTRAINT FKC01F0A03613C97DB FOREIGN KEY(FK_PROJECT_ID) REFERENCES LB_PROJECT(ID) ON DELETE CASCADE;
ALTER TABLE LB_BUILD ADD CONSTRAINT FK201ACA458C6B749 FOREIGN KEY(FK_SCHEDULE_ID) REFERENCES LB_SCHEDULE(ID) ON DELETE CASCADE;
INSERT INTO LB_ROLE VALUES(1,'ROLE_AUTHENTICATED');
INSERT INTO LB_ROLE VALUES(2,'ROLE_SITE_ADMIN');
INSERT INTO LB_ROLE VALUES(6,'ROLE_ANONYMOUS');
INSERT INTO LB_ROLE VALUES(3,'LUNTBUILD_PRJ_ADMIN');
INSERT INTO LB_ROLE VALUES(4,'LUNTBUILD_PRJ_BUILDER');
INSERT INTO LB_ROLE VALUES(5,'LUNTBUILD_PRJ_VIEWER');
INSERT INTO LB_USER VALUES(1,'<users who checked in code recently>',NULL,0,NULL,NULL);
